@inject IJSRuntime JS

<div class="build-info">
    <span class="env-label env-release">RELEASE</span>
    <span class="env-label env-staging">STAGING</span>
    <span class="env-label env-develop">DEVELOP</span>
    <span class="build-label">Build</span>
    <span class="build-value">@BuildDisplay</span>
</div>

@code {
    private string BuildDisplay = "-";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender)
        {
            return;
        }

        var info = await JS.InvokeAsync<BuildInfoPayload?>("pomiBuildInfo.get");
        if (info != null && !string.IsNullOrWhiteSpace(info.BuildTime))
        {
            BuildDisplay = $"{info.BuildTime} ({info.BuildId})";
            StateHasChanged();
        }
    }

    private class BuildInfoPayload
    {
        public string? BuildId { get; set; }
        public string? BuildTime { get; set; }
    }
}
