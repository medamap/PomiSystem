# ToDo

## Rule

- このファイルは「大分類 / 中分類 / 小分類」の3層でタスクを管理する。
- 大分類・中分類には必ず外部キーを付与する。
- 外部キーは「YYYY/MM/DD HH:mm Z0001」形式（同時生成が被る場合はZ番号をインクリメント）。
- 中分類・小分類は外部キーで紐づくものとして運用する。
- 作業が枝分かれした場合は随時ここに追記する。
- 「作業プラン提示→許可取得→実行」の短期タスク（ローカルスコープ）は登録不要。

## 大分類

- [ ] 現行X1実装との比較分析 (2026/02/01 11:52 Z0001)
- [ ] 実装タスク（比較分析対応）(2026/02/02 13:05 Z0001)
- [ ] 動作確認タスク (2026/02/02 13:06 Z0001)

## 中分類

- [x] 比較分析 (2026/02/01 12:10 Z0001)
  - [x] 旧X1の機能一覧を洗い出し（UI/変換/出力/保存）
  - [x] Blazor側の実装済み機能と差分整理（Quickターゲット選択を前提）
  - [x] 移植対象の優先度付け（最小動作→拡張）

- [x] 最小動作（MVP）実装 (2026/02/01 12:20 Z0001)

- [ ] 実装タスク（比較分析対応）(2026/02/02 13:05 Z0001)
  - [ ] 画面/入力/出力UIの拡充
  - [ ] 出力サイズ/トリミング仕様の拡充
  - [ ] 減色/ディザ/色相重視の拡充
  - [ ] PCG生成/制限/タイル最適化
  - [ ] 進捗/通知/保存/出力系

- [ ] 動作確認タスク (2026/02/02 13:06 Z0001)
  - [ ] 変換精度/出力整合の確認
  - [ ] UI/操作系の確認
  - [ ] 端末別（PC/タブレット/スマホ）確認

## 小分類

- [x] 比較分析 (2026/02/01 12:10 Z0001)
  - [x] 入力/出力UI: 画像入力、プレビュー、ズーム（出力/PCG）
  - [x] 出力サイズ: X1turbo 320x200 / x2 / x4、Auto x1/x2/x4、標準/QVGA/VGA、高解像度群
  - [x] トリミング: 25-75% + 方向ラベル（上下/左右）
  - [x] ディザ: none / bayer2 / bayer4 / floyd / atkinson
  - [x] 色相重視（肌色改善）: hueWeight + hueWeightAmount
  - [x] PCG制限: unlimited / limit(128-2048 step32) + 進捗/使用率バー
  - [x] 類似タイル結合: similarity threshold
  - [x] エッジ保護: edgeProtection + edgeProtectionAmount（Sobel強度）
  - [x] 調整: brightness/contrast/saturation
  - [x] リアルタイム更新: realtimePreview
  - [x] 出力: output PNG / PCG PNG / clipboard copy
  - [x] 設定保存: cookie保存/復元/リセット
  - [x] 処理UI: 進捗オーバーレイ + phase表示 + cancel
  - [x] Quick統合: X1ターゲット追加、Quick内の切替対応
  - [x] UI/UX: 入力ドラッグ&ドロップ / toast通知 / iOS保存導線
  - [x] 情報表示: 解像度/タイル数/PCG使用率/トリミング表示
  - [x] 差分メモ: Blazor版は現状MSXのみ対応、X1用UI/設定/出力が未実装
  - [x] 差分メモ: X1はPCG生成/タイルリデュース/進捗UIが主要機能
  - [x] 差分メモ: Quickでの機種切替は前提条件（X1パネルの追加が必要）
  - [x] 優先度: 最小動作（入力/出力/変換）
    - [x] 画像入力 + プレビュー
    - [x] 出力サイズ（X1turbo/Auto）
    - [x] トリミング位置
    - [x] ディザ（none/bayer2/bayer4/floyd/atkinson）
    - [x] 出力PNG
  - [x] 優先度: 第2段階（X1らしさ）
    - [x] 減色（デジタル8色）/色選択（色相重視の導入含む）
    - [ ] PCG生成 + PCGプレビュー
    - [ ] PCG制限（unlimited/limit + 使用率表示）
    - [ ] 類似タイル結合（similarity）
    - [ ] エッジ保護（edgeProtection）
  - [x] 優先度: 第3段階（使い勝手）
    - [ ] 色相重視（肌色改善）
    - [x] brightness/contrast/saturation
    - [x] リアルタイム更新
    - [ ] 進捗オーバーレイ/キャンセル
    - [ ] 設定保存/復元/リセット
    - [ ] クリップボードコピー

- [x] 最小動作（MVP）実装 (2026/02/01 12:20 Z0001)
  - [x] 入力: 画像選択（InputFile）+ プレビュー表示
  - [x] 変換: X1基本サイズ（320x200）+ オートサイズ
  - [x] トリミング: 25-75% のみ（方向ラベルは後回し可）
  - [x] ディザ: none / bayer2 / bayer4 / floyd / atkinson
  - [x] 出力: PNG保存（PC/モバイル対応）
  - [x] Quick統合: ターゲット選択にX1追加
  - [x] 優先順位: Input → Resize/Trim → Dither → Output → Quick統合

- [ ] 実装タスク（比較分析対応）(2026/02/02 13:05 Z0001)
  - [ ] 画面/入力/出力UIの拡充
    - [x] 入力プレビューズーム（キャンバス化・サイズ反映）
    - [ ] 入力プレビューの情報表示（入力解像度など）
    - [ ] 出力プレビューの情報表示（タイル/PCG使用率）
    - [ ] 出力プレビューの拡大縮小UIの整理
  - [ ] 出力サイズ/トリミング仕様の拡充
    - [x] X1turbo x1/x2/x4
    - [x] Auto x1/x2/x4
    - [ ] 標準/QVGA/VGA/高解像度群の追加
    - [ ] トリミング方向ラベル（上下/左右）
  - [ ] 減色/ディザ/色相重視の拡充
    - [x] ディザ（none/bayer2/bayer4/floyd/atkinson）
    - [x] 色相重視（HueWeight + 強度）
    - [ ] 減色アルゴリズムのX1版導入（8色選択の最適化）
  - [ ] PCG生成/制限/タイル最適化
    - [ ] PCG生成（8x8タイル）
    - [ ] PCGプレビュー表示
    - [ ] PCG制限（unlimited/limit）
    - [ ] 類似タイル結合（similarity）
    - [ ] エッジ保護（edgeProtection）
  - [ ] 進捗/通知/保存/出力系
    - [x] リアルタイム更新（ON/OFF）
    - [ ] 進捗オーバーレイ/キャンセル
    - [ ] 設定保存/復元/リセット
    - [ ] クリップボードコピー

- [ ] 動作確認タスク (2026/02/02 13:06 Z0001)
  - [ ] 変換精度/出力整合の確認
    - [ ] X1出力PNGの視認チェック（複数画像）
    - [ ] 色相重視の効き具合確認
    - [ ] ディザ種別の差分確認
  - [ ] UI/操作系の確認
    - [ ] 入力/出力ズームの動作確認
    - [ ] トリミングスライダの動作確認
    - [ ] ファイル選択→プレビュー→変換の一連動作確認
  - [ ] 端末別（PC/タブレット/スマホ）確認
    - [ ] PC（Chrome/Edge）
    - [ ] iPad（Safari/代替ブラウザ）
    - [ ] スマホ（iOS/Android）
